* Q: What's the deal with refreshToken?
* Q: Should I be setting request timeout? Where? How?
* Q: How does login provider work with apps?
  * The backend appears to specify a redirect URL. I guess this could be an
    application link.
* CHANGE name of MFA* methods
* CHANGE getClaim to only return nullable strings
* IDEA: FileMetadata.toHttpHeaders or FileMetadata.updateHttpHeaders
* CHANGE: Made unsubscribe delegate non-destructive and silent
* BUGS
  * DOCS
    * /auth/mfa/generate reads qe code, not qr code
    * login response is incorrect â€” there is no session
    * MFAGenerate docs show the wrong params
    * mfa/totp URL is wrong
      https://docs.nhost.io/auth/api-reference#totp-login
    * logout URL is wrong (all is being passed as a body arg, not a query arg)
      https://docs.nhost.io/auth/api-reference#logout-user
    * NhostApolloProvider confuses the NhostAuthProvider docs
      * It's completely unrelated, but uses the same `auth` variable, so the
        reader (me!) wonders how everything ties together. Until I realize they
        aren't (aside from requiring the same auth resource).
    * Email changing APIs are not documented
  * Unsubscribe listener functions can potentially remove listeners other than
    themselves
  * mfa/generate requires an empty JSON object body (should allow null body)
  * Bad path joining in Storage.ts
  * Storage doesn't work outside of web pages, I don't think
  * POST to /storage/o returns a response with "key" field, but
    GET /storage/m for a directory lists the field as "Key" (capitalized)
    GET /storage/m for a file is "key" lowercase
  * Packages are missing LICENSE files
  * Is it really the OLD password...or is it the current one?
  * Does the API to directly change your email work? I keep on 404'ing
  * Why does the change email request get sent to the _new_ email address?
* Sleep timer won't make sense for Dart, since periodic timers stack up. To
  read: https://github.com/dart-lang/sdk/issues/23487
* Q: Do we need toJSONs? They are kind of helpful for debug printing.
* THOUGHT: toStrings would be nice for the core types
* Q: Do we need to support custom JWT keys? (hasura settings mentions them)
* IDEA: user_data seems pretty limited. Why not expose the fields that are
    actually editable? Or does this hook into Hasura somehow.
* DART BUG:
  * ContentType does not implement equality
    * Posted https://github.com/dart-lang/sdk/issues/34061#issuecomment-793332807
      to encourage an API change here
* IDEA: More specific exceptions
  * User already registered
  * Invalid user data
  * Consider renaming mfaTotp to completeMfaLogin or something
* IDEA: API fool-proofing
  * It's an API that reduces the opportunity for mistakes
  * For example, a login() or register() call returns an object that is able
    to perform operations specific to the user
  * This has the added benefit of allowing multiple logged in users
    simultaneously
* IDEA: Cross-platform API tests
  * Each client can be verified against headers and JSON body, keyed by a
    request ID
  * Each request ID has an associated response object, which can be used for
    simulating behavioral tests
  * Because we have requests and responses, we can test the server as well
  * A single repo can ensure that all clients and the server stay in sync
* Q: The decoded QR code provides a lot more information than the mfa/generate
     response.
     secret=BASXODRVLFSX452T&period=30&digits=6&algorithm=SHA1&issuer=HBP

     otp_secret does not appear to be enough to generate a code. Should we also
     return these additional values from the backend? OR document them?
* Q: Should we automatically add a trailing slash to the getDirectoryMetadata
     path
* IMPROVE
  * DOCS:
    * Storage Rules should be better documented
* TODO: Extract workflows into a version configurable action
* Ensure that Auth isAutenticated goes to false when logging out
* IDEA: A 4th package, for graphql'ing from Dart without Flutter
* RECOMMEND:
  * Packages are called
    * 'nhost' (or 'nhost_sdk')
    * 'nhost_flutter_auth'
    * 'nhost_flutter_graphql'
    * (+) 'nhost_graphql'
  * Consider passing null to authStateChanges, representing loading. This way
    UI can react more easily (like disabling buttons during a login/logout)
* IDEA: isAutenticated could be a tri-state enum
* Q: I see a banner asking me if I want to upgrade Hasura server...can I
     actually do that?
* IDEA: It would be nice if confirmEmailChange was an auth response, so that
  my cached user could refresh.
* CONCERN: Could it be problematic that the login API reveals that a user
  exists when the password doesn't match.
* It is EXTREMELY important that _setSession() and _clearSession() be awaited. I
  just battled a brutal race condition caused by the use of unawaited().

# TESTING
## APIs
### AUTH
* register
* login
* logout
* activate
* changeEmail
* requestEmailChange
* confirmEmailChange
* changePassword
* requestPasswordChange
* confirmPasswordChange
* generateMfa
* enableMfa
* disableMfa
* mfaTotp
